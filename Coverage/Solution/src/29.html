<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\arg-parser\ArgParser\ArgParser.Flavors\Git\GitParser.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Diagnostics;
using ArgParser.Core;
using ArgParser.Core.Help;

namespace ArgParser.Flavors.Git
{
    [DebuggerDisplay(&quot;{Name}&quot;)]
    public class GitParser : IParser
    {
            
        public GitParser(GitFlavor flavor)
        {
            _flavor = flavor ?? throw new ArgumentNullException(nameof(flavor));
        }

        private readonly GitFlavor _flavor;
        private readonly List&lt;IParameter&gt; AllParameters = new List&lt;IParameter&gt;();

        public virtual void AddParameter(IParameter parameter, IGenericHelp help = null)
        {
            AllParameters.Add(parameter);
            DefaultParser.AddParameter(parameter, help);
        }

            
        public bool CanConsume(object instance, IIterationInfo info)
        {
            var canSelf = DefaultParser.CanConsume(instance, info);
            var canBase = _flavor.BaseFlavor?.Parser.CanConsume(instance, info) ?? false;
            return canSelf || canBase;
        }

            
        public IIterationInfo Consume(object instance, IIterationInfo info)
        {
            var canSelf = DefaultParser.CanConsume(instance, info);
            if (canSelf)
                return DefaultParser.Consume(instance, info);
            var canBase = _flavor.BaseFlavor?.Parser.CanConsume(instance, info) ?? false;
            if (canBase)
                return _flavor.BaseFlavor.Parser.Consume(instance, info);
            throw new InvalidOperationException(&quot;&quot;); // todo: fix
        }

            
        public void Reset()
        {
            foreach (var allParameter in AllParameters) allParameter.Reset();
        }

            
        public IParser BaseParser =&gt; DefaultParser.BaseParser;

        public DefaultParser DefaultParser { get; set; } = new DefaultParser();

            
        public IGenericHelp Help =&gt; DefaultParser.Help;

        public string Name =&gt; _flavor.Name;
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,9,13,43,1],[14,9,14,10,1],[15,13,15,81,1],[16,9,16,10,1],[19,9,19,82,1],[22,9,22,10,1],[23,13,23,42,1],[24,13,24,57,1],[25,9,25,10,1],[29,9,29,10,1],[30,13,30,68,1],[31,13,31,90,1],[32,13,32,39,1],[33,9,33,10,1],[37,9,37,10,1],[38,13,38,68,1],[39,13,39,25,1],[40,17,40,62,1],[41,13,41,90,1],[42,13,42,25,1],[43,17,43,74,1],[44,13,44,53,1],[45,9,45,10,1],[49,9,49,10,1],[50,13,50,20,1],[50,22,50,38,1],[50,39,50,41,1],[50,42,50,55,1],[50,57,50,78,1],[51,9,51,10,1],[54,38,54,62,1],[56,60,56,79,1],[59,37,59,55,1],[61,31,61,43,1]]);
    </script>
  </body>
</html>