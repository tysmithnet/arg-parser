<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\arg-parser\ArgParser\ArgParser.Styles\ParseStrategy\ArgsMutator.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using System.Linq;
using System.Text.RegularExpressions;
using ArgParser.Core;
using ArgParser.Styles.ParseStrategy;

namespace ArgParser.Styles
{
    public class ArgsMutator : IArgsMutator
    {
        public ArgsMutator(IContext context)
        {
            Context = context.ThrowIfArgumentNull(nameof(context));
        }

        public string[] Mutate(MutateArgsRequest request)
        {
            var allSwitchesForChain = request.Chain.SelectMany(x =&gt; x.Parameters).OfType&lt;Switch&gt;().ToList();
            var booleanSwitches = allSwitchesForChain.OfType&lt;BooleanSwitch&gt;().ToList();
            var others = allSwitchesForChain.Except(booleanSwitches).ToList();
            var booleanLetters = booleanSwitches.Where(s =&gt; s.Letter.HasValue).Select(x =&gt; x.Letter.Value.ToString())
                .Join(&quot;&quot;);
            var otherLetters = others.Where(s =&gt; s.Letter.HasValue).Select(x =&gt; x.Letter.Value.ToString()).Join(&quot;&quot;);
            if (!booleanLetters.Any())
                return request.Args;
            List&lt;string&gt; groups;
            if (others.Any())
                groups = request.Args.Where(a =&gt; Regex.IsMatch(a, $&quot;-[{booleanLetters}]+[{otherLetters}]?&quot;)).ToList();
            else
                groups = request.Args.Where(a =&gt; Regex.IsMatch(a, $&quot;-[{booleanLetters}]+&quot;)).ToList();
            var copy = request.Args.ToList();
            foreach (var g in groups)
                for (var i = 0; i &lt; copy.Count; i++)
                {
                    var c = copy[i];
                    if (g.Contains(c))
                    {
                        copy.RemoveAt(i);
                        var letters = c.Substring(1).ToCharArray().Reverse();
                        foreach (var letter in letters) copy.Insert(i, $&quot;-{letter}&quot;);
                    }
                }

            return copy.ToArray();
        }

        public IContext Context { get; set; }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[11,9,11,45,1],[12,9,12,10,1],[13,13,13,68,1],[14,9,14,10,1],[17,9,17,10,1],[18,13,18,69,1],[18,69,18,81,1],[18,81,18,109,1],[18,13,18,109,1],[19,13,19,88,1],[20,13,20,79,1],[21,13,21,61,1],[21,61,21,78,1],[21,78,21,92,1],[21,92,21,117,1],[21,117,22,27,1],[21,13,22,27,1],[23,13,23,50,1],[23,50,23,67,1],[23,67,23,81,1],[23,81,23,106,1],[23,106,23,117,1],[23,13,23,117,1],[24,13,24,39,1],[25,17,25,37,1],[27,13,27,30,1],[28,17,28,50,1],[28,50,28,108,1],[28,108,28,119,1],[28,17,28,119,1],[30,17,30,50,1],[30,50,30,91,1],[30,91,30,102,1],[30,17,30,102,1],[31,13,31,46,1],[32,13,32,20,1],[32,22,32,27,1],[32,28,32,30,1],[32,31,32,37,1],[33,22,33,31,1],[33,33,33,47,1],[33,49,33,52,1],[34,17,34,18,1],[35,21,35,37,1],[36,21,36,39,1],[37,21,37,22,1],[38,25,38,42,1],[39,25,39,78,1],[40,25,40,32,1],[40,34,40,44,1],[40,45,40,47,1],[40,48,40,55,1],[40,57,40,86,1],[41,21,41,22,1],[42,17,42,18,1],[44,13,44,35,1],[45,9,45,10,1]]);
    </script>
  </body>
</html>