<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\projects\arg-parser\ArgParser\ArgParser.Core\DefaultParameter.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
// ***********************************************************************
// Assembly         : ArgParser.Core
// Author           : @tysmithnet
// Created          : 10-20-2018
//
// Last Modified By : @tysmithnet
// Last Modified On : 10-21-2018
// ***********************************************************************
// &lt;copyright file=&quot;Parameter.cs&quot; company=&quot;ArgParser.Core&quot;&gt;
//     Copyright (c) . All rights reserved.
// &lt;/copyright&gt;
// &lt;summary&gt;&lt;/summary&gt;
// ***********************************************************************

using System;

namespace ArgParser.Core
{
    public class DefaultParameter : IParameter
    {
        public DefaultParameter(Func&lt;object, IIterationInfo, bool&gt; canConsumeCallback,
            Func&lt;object, IIterationInfo, IIterationInfo&gt; consumeCallback)
        {
            CanConsumeCallback = canConsumeCallback ?? throw new ArgumentNullException(nameof(canConsumeCallback));
            ConsumeCallback = consumeCallback ?? throw new ArgumentNullException(nameof(consumeCallback));
        }

        internal DefaultParameter()
        {
        }

            
        public bool CanConsume(object instance, IIterationInfo info) =&gt;
            CanConsumeCallback?.Invoke(instance, info) ?? false;

            
        public IIterationInfo Consume(object instance, IIterationInfo info) =&gt;
            ConsumeCallback?.Invoke(instance, info) ?? info;

            
        public void Reset()
        {
            ;
        }

        public Func&lt;object, IIterationInfo, bool&gt; CanConsumeCallback { get; set; }
        public Func&lt;object, IIterationInfo, IIterationInfo&gt; ConsumeCallback { get; set; }
    }

    public class DefaultParameter&lt;T&gt; : DefaultParameter, IParameter&lt;T&gt;
    {
            
        public DefaultParameter(
            Func&lt;T, IIterationInfo, bool&gt; canConsumeCallback,
            Func&lt;T, IIterationInfo, IIterationInfo&gt; consumeCallback)
        {
            if (canConsumeCallback == null)
                throw new ArgumentNullException(nameof(canConsumeCallback));
            if (consumeCallback == null)
                throw new ArgumentNullException(nameof(consumeCallback));
            CanConsumeCallback = (obj, info) =&gt;
            {
                if (obj is T casted)
                    return canConsumeCallback(casted, info);
                return false;
            };
            ConsumeCallback = (obj, info) =&gt;
            {
                if (obj is T casted)
                    return consumeCallback(casted, info);
                return info;
            };
        }

            
        public bool CanConsume(T instance, IIterationInfo info) =&gt; CanConsumeCallback(instance, info);

            
        public IIterationInfo Consume(T instance, IIterationInfo info) =&gt; ConsumeCallback(instance, info);
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[21,9,22,74,1],[23,9,23,10,1],[24,13,24,116,1],[25,13,25,107,1],[26,9,26,10,1],[28,9,28,36,1],[29,9,29,10,1],[30,9,30,10,1],[34,13,34,64,1],[38,13,38,60,1],[42,9,42,10,1],[43,13,43,14,1],[44,9,44,10,1],[53,9,55,69,1],[56,9,56,10,1],[57,13,57,44,1],[58,17,58,77,1],[59,13,59,41,1],[60,17,60,74,1],[61,13,62,13,1],[62,13,62,14,1],[62,14,63,17,1],[63,17,63,37,1],[63,37,64,21,1],[64,21,64,61,1],[64,61,65,17,1],[65,17,65,30,1],[65,30,66,13,1],[66,13,66,14,1],[66,14,66,15,1],[61,13,66,15,1],[67,13,68,13,1],[68,13,68,14,1],[68,14,69,17,1],[69,17,69,37,1],[69,37,70,21,1],[70,21,70,58,1],[70,58,71,17,1],[71,17,71,29,1],[71,29,72,13,1],[72,13,72,14,1],[72,14,72,15,1],[67,13,72,15,1],[73,9,73,10,1],[76,68,76,102,1],[79,75,79,106,1]]);
    </script>
  </body>
</html>